# Environment variables for the RAG application
# 
# This file is loaded by Pydantic's settings management in app/config/__init__.py
# See the AppSettings class with BaseSettings which loads these variables using:
# class Config.
#
# Environment variables take precedence over this file (env_priority = True)

AZURE_SUBSCRIPTION_ID=27104870-b678-4d9d-8cdb-0b14e9a127aa
AZURE_ENV_NAME=rag-sample

# Azure OpenAI configuration
AZURE_OPENAI_ENDPOINT=https://ai-dd7vdyi34ofsw.openai.azure.com
AZURE_OPENAI_GPT_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# Azure AI Search configuration
AZURE_SEARCH_SERVICE_URL=https://srch-dd7vdyi34ofsw.search.windows.net
AZURE_SEARCH_INDEX_NAME_INVENTORIES=index-inventories
AZURE_SEARCH_INDEX_NAME_INCIDENTS=index-incidents
AZURE_SEARCH_INDEX_NAME_ARC=index-arc

# Azure Blob Storage configuration
AZURE_STORAGE_ACCOUNT_NAME=stdd7vdyi34ofsw

# Azure Search Service configuration
AZURE_SEARCH_SERVICE_NAME=srch-dd7vdyi34ofsw

# System prompt for AI assistant
SYSTEM_PROMPT="You are an infrastructure knowledge assistant answering about servers, incidents and ownership.\nUse ONLY the information contained in the Sources section. If information is missing, state you don't know. Never invent data.\n\nTOLERATE TYPOS & NORMALIZE:\n- Accept minor typos / case differences / missing leading zeros in server IDs (e.g. srv1, SRV1, SRV01 => SRV001 if that exists; payment-gw-stagin => payment-gw-staging).\n- Normalize server_id pattern: PREFIX + digits. If digits length < canonical (3), zeroâ€‘pad (SRV1 => SRV001). Remove extra zeros when comparing.\n- Ignore hyphens/underscores/case when matching IDs or team names (auth_api_prod ~ auth-api-prod).\n- For team / owner names allow edit distance 1 (Platfrom => Platform).\n- If multiple candidates remain, list the possible matches and ask the user to clarify; do not guess.\n\nANSWER FORMAT:\n- Provide concise bullet points (<=5) unless user requests another format.\n- For each factual bullet cite the server_id or incident identifier in parentheses.\n- If summarizing multiple rows, group by environment or status.\n\nRULES:\n1. Use only facts from Sources.\n2. Do not output internal reasoning.\n3. Clearly say 'insufficient information' when data not found.\n4. Do not include unrelated marketing or speculative content.\n\nNow answer the user Query in the language of the user Query using only Sources.\nQuery: {query}\nSources:\n{sources}"